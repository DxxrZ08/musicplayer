<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MusicBox â€” Admin Login</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="css/style.css">
  </head>
  <body class="bg-slate-900 text-slate-100">
  <main class="d-flex justify-content-center align-items-center" style="height:80vh;">
    <div class="card p-4 shadow-sm w-100 glass text-light" style="max-width:420px;">
      <h4 class="mb-3">Admin Login</h4>
      <form id="adminLoginForm" novalidate>
        <div class="mb-3">
          <label for="adminEmail" class="form-label">Email</label>
          <input id="adminEmail" type="email" class="form-control" required>
        </div>
        <div class="mb-3">
          <label for="adminPassword" class="form-label">Password</label>
          <input id="adminPassword" type="password" class="form-control" required minlength="6">
        </div>
        <div id="adminLoginError" class="text-danger mb-3" style="display:none;"></div>
        <button class="btn btn-primary w-100" type="submit">Admin Login</button>
        <div class="mt-3 text-center">
          Default admin: <strong>admin@example.com / admin123</strong>
        </div>
      </form>
    </div>
  </main>

  <script>
    // Simple client-side admin login fallback.
    // Uses the visible demo credentials and sets sessionStorage.adminLoggedIn.
    document.getElementById('adminLoginForm').addEventListener('submit', function(e){
      e.preventDefault();
      const email = document.getElementById('adminEmail').value.trim();
      const pwd = document.getElementById('adminPassword').value;
      const err = document.getElementById('adminLoginError');
      err.style.display='none';

      // Demo admin credentials (keeps backwards compatibility with the page hint)
      if (email === 'admin@example.com' && pwd === 'admin123') {
        sessionStorage.setItem('adminLoggedIn','1');
        // Redirect to admin dashboard
        window.location.href = 'admin-dashboard.html';
        return;
      }

      // If a real auth system exists, try calling it (graceful fallback)
      if (typeof loginUser === 'function') {
        loginUser({email, password: pwd}).then(()=>{
          const auth = (typeof getAuth === 'function') ? getAuth() : null;
          if (auth && auth.isAdmin) {
            sessionStorage.setItem('adminLoggedIn','1');
            window.location.href = 'admin-dashboard.html';
          } else {
            err.style.display='block';
            err.textContent = 'Not an admin account';
          }
        }).catch(ex=>{
          err.style.display='block'; err.textContent = ex && ex.message || 'Invalid admin credentials';
        });
        return;
      }

      err.style.display='block';
      err.textContent = 'Invalid admin credentials';
    });
  </script>

  <script src="js/admin.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
